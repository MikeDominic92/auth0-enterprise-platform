# ============================================================================
# Auth0 Enterprise Platform - Environment Configuration
# ============================================================================
# Copy this file to .env and fill in your values
# NEVER commit .env to version control
# ============================================================================

# ----------------------------------------------------------------------------
# Application Settings
# ----------------------------------------------------------------------------
NODE_ENV=development
APP_NAME=auth0-enterprise-platform
APP_VERSION=1.0.0
PORT=3000
HOST=0.0.0.0

# API versioning
API_VERSION=v1
API_PREFIX=/api

# Timezone for date operations
TZ=UTC

# ----------------------------------------------------------------------------
# Auth0 Configuration
# ----------------------------------------------------------------------------
# Auth0 tenant domain (e.g., your-tenant.auth0.com)
AUTH0_DOMAIN=your-tenant.auth0.com

# Auth0 API identifier (audience)
AUTH0_AUDIENCE=https://api.your-domain.com
AUTH0_API_AUDIENCE=https://api.your-domain.com

# Auth0 Application credentials (Machine-to-Machine)
AUTH0_CLIENT_ID=your-client-id
AUTH0_CLIENT_SECRET=your-client-secret

# Auth0 Management API credentials (for user management operations)
AUTH0_MANAGEMENT_CLIENT_ID=your-management-client-id
AUTH0_MANAGEMENT_CLIENT_SECRET=your-management-client-secret
AUTH0_MANAGEMENT_AUDIENCE=https://your-tenant.auth0.com/api/v2/

# Auth0 connection name for enterprise SSO
AUTH0_CONNECTION_NAME=Username-Password-Authentication

# Token settings
AUTH0_TOKEN_ALGORITHM=RS256
AUTH0_TOKEN_ISSUER=https://your-tenant.auth0.com/
AUTH0_ISSUER=https://your-tenant.auth0.com/

# ----------------------------------------------------------------------------
# Auth0 Frontend Configuration (Next.js)
# ----------------------------------------------------------------------------
# Secret for encrypting session cookies (generate with: openssl rand -hex 32)
AUTH0_SECRET=your-auth0-secret-at-least-32-characters

# Base URL of the frontend application
AUTH0_BASE_URL=http://localhost:3000

# Auth0 issuer URL (same as token issuer)
AUTH0_ISSUER_BASE_URL=https://your-tenant.auth0.com

# ----------------------------------------------------------------------------
# Database Configuration (PostgreSQL)
# ----------------------------------------------------------------------------
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=auth0_enterprise
DATABASE_USER=postgres
DATABASE_PASSWORD=your-secure-password

# Connection string (alternative to individual settings)
DATABASE_URL=postgresql://postgres:your-secure-password@localhost:5432/auth0_enterprise

# Connection pool settings
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=20
DATABASE_IDLE_TIMEOUT=30000
DATABASE_CONNECTION_TIMEOUT=5000

# SSL settings for production
DATABASE_SSL_ENABLED=false
DATABASE_SSL_REJECT_UNAUTHORIZED=true

# ----------------------------------------------------------------------------
# Redis Configuration
# ----------------------------------------------------------------------------
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# Connection string (alternative)
REDIS_URL=redis://localhost:6379/0

# Redis cluster mode (for production)
REDIS_CLUSTER_ENABLED=false
REDIS_CLUSTER_NODES=

# Cache TTL settings (in seconds)
CACHE_TTL_DEFAULT=3600
CACHE_TTL_USER_SESSION=86400
CACHE_TTL_PERMISSIONS=1800
CACHE_TTL_ORGANIZATIONS=7200

# ----------------------------------------------------------------------------
# Elasticsearch Configuration (Optional - for audit logs)
# ----------------------------------------------------------------------------
ELASTICSEARCH_ENABLED=false
ELASTICSEARCH_NODE=http://localhost:9200
ELASTICSEARCH_USERNAME=
ELASTICSEARCH_PASSWORD=
ELASTICSEARCH_INDEX_PREFIX=auth0-audit

# ----------------------------------------------------------------------------
# Logging Configuration
# ----------------------------------------------------------------------------
# Log level: error, warn, info, http, verbose, debug, silly
LOG_LEVEL=info

# Log format: json, simple, combined
LOG_FORMAT=json

# File logging
LOG_FILE_ENABLED=true
LOG_FILE_PATH=./logs
LOG_FILE_MAX_SIZE=10m
LOG_FILE_MAX_FILES=14d

# Console logging
LOG_CONSOLE_ENABLED=true

# External logging (e.g., Datadog, Splunk)
LOG_EXTERNAL_ENABLED=false
LOG_EXTERNAL_SERVICE=
LOG_EXTERNAL_API_KEY=

# ----------------------------------------------------------------------------
# Security Settings
# ----------------------------------------------------------------------------
# JWT secret for internal tokens (use strong random value)
JWT_SECRET=your-256-bit-secret-key-change-in-production

# Session settings
SESSION_SECRET=your-session-secret-change-in-production
SESSION_MAX_AGE=86400000

# CORS settings
CORS_ENABLED=true
CORS_ORIGIN=http://localhost:3001
CORS_CREDENTIALS=true

# Rate limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# API key for internal service communication
INTERNAL_API_KEY=your-internal-api-key

# Encryption key for sensitive data at rest (32 bytes, base64 encoded)
ENCRYPTION_KEY=your-32-byte-encryption-key-base64

# ----------------------------------------------------------------------------
# Feature Flags
# ----------------------------------------------------------------------------
# Multi-tenancy features
FEATURE_MULTI_TENANT=true
FEATURE_ORGANIZATION_PROVISIONING=true
FEATURE_CUSTOM_DOMAINS=false

# Authentication features
FEATURE_MFA_ENFORCEMENT=true
FEATURE_SSO_ENABLED=true
FEATURE_PASSWORDLESS=false
FEATURE_SOCIAL_LOGIN=true

# Authorization features
FEATURE_RBAC_ENABLED=true
FEATURE_FINE_GRAINED_PERMISSIONS=true
FEATURE_DYNAMIC_SCOPES=false

# Audit and compliance
FEATURE_AUDIT_LOGGING=true
FEATURE_COMPLIANCE_REPORTS=true
FEATURE_DATA_RETENTION=true

# API features
FEATURE_API_VERSIONING=true
FEATURE_GRAPHQL=false
FEATURE_WEBHOOKS=true

# Developer features
FEATURE_SWAGGER_UI=true
FEATURE_DEBUG_MODE=false

# ----------------------------------------------------------------------------
# Compliance Settings
# ----------------------------------------------------------------------------
# Data retention period (in days)
DATA_RETENTION_DAYS=365
AUDIT_LOG_RETENTION_DAYS=730

# GDPR compliance
GDPR_ENABLED=true
GDPR_DPO_EMAIL=dpo@your-company.com

# SOC2 compliance
SOC2_ENABLED=false

# ----------------------------------------------------------------------------
# Monitoring and Observability
# ----------------------------------------------------------------------------
# Metrics
METRICS_ENABLED=true
METRICS_PORT=9090
METRICS_PATH=/metrics

# Health checks
HEALTH_CHECK_PATH=/health
HEALTH_CHECK_DETAILED=true

# Tracing (OpenTelemetry)
TRACING_ENABLED=false
TRACING_SERVICE_NAME=auth0-enterprise-platform
TRACING_EXPORTER=jaeger
TRACING_ENDPOINT=http://localhost:14268/api/traces

# ----------------------------------------------------------------------------
# Email Configuration (for notifications)
# ----------------------------------------------------------------------------
EMAIL_ENABLED=false
EMAIL_PROVIDER=smtp
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_SECURE=true
SMTP_USER=
SMTP_PASSWORD=
EMAIL_FROM=noreply@your-domain.com

# ----------------------------------------------------------------------------
# Webhook Configuration
# ----------------------------------------------------------------------------
WEBHOOK_SECRET=your-webhook-secret
WEBHOOK_TIMEOUT_MS=30000
WEBHOOK_RETRY_ATTEMPTS=3

# ----------------------------------------------------------------------------
# Queue Configuration (Bull/Redis)
# ----------------------------------------------------------------------------
QUEUE_ENABLED=true
QUEUE_PREFIX=auth0-enterprise
QUEUE_DEFAULT_ATTEMPTS=3
QUEUE_BACKOFF_TYPE=exponential
QUEUE_BACKOFF_DELAY=1000
